
DATASET_SIZE = 30;
NUM_OF_TRAINING =25;

height = 3000;
y_interval = 300;

width = 3000;
x_interval = 300;

n = 1;
% num_blocks = 4*4;

for i = 1 : NUM_OF_TRAINING
    source1 = strcat(num2str(i), '.tif');
    source2 = strcat(num2str(i), '_b.tif');
    
    img = imread(source1);
    img = process(img);
    seg = imread(source2);
%     fprintf('image source1: %s\n', source1);
%     fprintf('image source2: %s\n', source2);
%     sizeOf(img);
    X(n,:) = img(:);
    y(n,:) = seg(:);
    
    n = n + 1;

%     for i = 1:width / x_interval
%         for j = 1: height / y_interval
%             img_block = img(y_min:y_min + y_interval-1 , x_min: x_min + x_interval-1);
%             seg_block = seg(y_min:y_min + y_interval-1 , x_min: x_min + x_interval-1);
%             X(n,:) = img_block(:);
%             y(n,:) = seg_block(:);
%             
%             y_min = y_min + y_interval;
%             n = n+1;
%         end
%         y_min = 1;
%         x_min = x_min + x_interval;
%     
%     end
end

          
          
%     img1 = img(1 : width/2, 1 : height/2);
%     section1 = section(1 : width/2, 1 : height/2);
%     X(n,:) = img1(:);
%     y(n,:) = section1(:);
%     n = n+1;
%     
%     img2 = img(width/2 + 1 : end, 1 : height/2);
%     section2 = section(width/2 + 1 : end, 1 : height/2);
%     X(n,:) = img2(:);
%     y(n,:) =section2(:);
%     n = n+1;
%     
%     img3 = img(1 : width/2, height/2 + 1 : end);
%     section3 = section(1 : width/2, height/2 + 1 : end);
%     X(n,:) = img3(:);
%     y(n,:) = section3(:);
%     n = n+1;
%     
%     img4 = img(width/2 + 1 : end, height/2 + 1 : end);
%     section4 = section(width/2 + 1 : end, height/2 + 1 : end);
%     X(n,:) = img4(:);
%     y(n,:) = section4(:);
%     n = n+1;

n = 1;
for i = NUM_OF_TRAINING+1 : DATASET_SIZE
    
    source1 = strcat(num2str(i), '.tif');
    source2 = strcat(num2str(i), '_b.tif');
    
    img = imread(source1);
    img = process(img);
    seg = imread(source2);
    
    fprintf('image source1: %s\n', source1);
    fprintf('image source2: %s\n', source2);
    
    X_test(n,:) = img(:);
    y_test(n,:) = seg(:);
    
    n = n + 1;
%     
%     img = imread(strcat(num2str(i), '.tif'));
%     img = process(img);
%     seg = imbinarize(imread(strcat(num2str(i), '_b.tif')));
%     x_min = 1;
%     y_min = 1;
% 
%     for i = 1:width / x_interval
%         for j = 1: height / y_interval
%             img_block = img(y_min:y_min + y_interval-1 , x_min: x_min + x_interval-1);
%             seg_block = seg(y_min:y_min + y_interval-1 , x_min: x_min + x_interval-1);
%             X_test(n,:) = img_block(:);
%             y_test(n,:) = seg_block(:);
%             
%             y_min = y_min + y_interval;
%             n = n+1;
%         end
%         y_min = 1;
%         x_min = x_min + x_interval;
%     
%     end
end

% 
%     img = imread(strcat(num2str(i), '.tif'));
%     section = imread(strcat(num2str(i), '_b.tif'));
%     
%     for i = 1:width / x_interval
%         for j = 1: height / y_interval
%             img_block = GS(y_min:y_min + y_interval-1 , x_min: x_min + x_interval-1);
%             
%             X(n,:) = img_block(:)';
%         
%             y_min = y_min + y_interval;
%             n = n+1;
%         end
%         y_min = 1;
%         x_min = x_min + x_interval;
%     
%     end
%     % divide the image into 4 parts
%     img1 = img(1 : width/2, 1 : height/2);
%     section1 = section(1 : width/2, 1 : height/2);
%     X(n,:) = img1(:);
%     y(n,:) = section1(:);
%     n = n+1;
%     
%     img2 = img(width/2 + 1 : end, 1 : height/2);
%     section2 = section(width/2 + 1 : end, 1 : height/2);
%     X(n,:) = img2(:);
%     y(n,:) =section2(:);
%     n = n+1;
%     
%     img3 = img(1 : width/2, height/2 + 1 : end);
%     section3 = section(1 : width/2, height/2 + 1 : end);
%     X(n,:) = img3(:);
%     y(n,:) = section3(:);
%     n = n+1;
%     
%     img4 = img(width/2 + 1 : end, height/2 + 1 : end);
%     section4 = section(width/2 + 1 : end, height/2 + 1 : end);
%     X(n,:) = img4(:);
%     y(n,:) = section4(:);
%     n = n+1;

